{% extends "base_page.html" %}

{% block pagetitle %}
Cards
{% endblock %}

{% block page-title %}
<p style="font-size:50px;">Слова по карточкам </p>
{% endblock %}

{% block page-lead %}
<!--Список всех уроков, слов и их переводов-->
<p class="fst-italic" style="font-size:25px;">Изучение новых слов с помощью карточек с иллюстрациями </p>
{% endblock %}

{% block content %}
<p class="test_text" id="test_text" style="font-size:25px;"></p>
<div class="container px-4 py-5" id="lesson-contents">
    {% for id, topic, word, translation in words %}
    <div id="card_block_{{ word }}_{{ id }}" class="row g-4 py-5 row-cols-1 row-cols-lg-3">
        <style>
                a.card_{{ word }} {
                    display: inline-block;
                    height: 100px;
                    width: 250px;
                    background: #66CCFF;
                    transition: all 0.6s;
                    align-items: center;
                }
                a.card_{{ word }}:hover {
                    background: #99FFCC;
                }
                h3.lesson_card {
                    /*display: inline-block;*/
                    display: flex;
                    border-radius: 10px;
                    vertical-align: middle;
                    align-items: center;
                    justify-content: center;
                    line-height: normal;
                }
        </style>
        <div id="block_{{ word }}" class="col d-flex">
            <a class = "card_{{ word }}" id = "card_{{ word }}">
                <h3 class = "lesson_card" id = "card">{{ word }}</h3>
            </a>
        </div>
        <style>
                a.card_translation_{{ word }} {
                    display: none;
                    height: 100px;
                    width: 250px;
                    background: #66CCFF;
                    transition: all 0.6s;
                    align-items: center;
                }
                a.card_translation_{{ word }}:hover {
                    background: #99FFCC;
                }
                h3.lesson_card {
                    /*display: inline-block;*/
                    display: flex;
                    border-radius: 10px;
                    vertical-align: middle;
                    align-items: center;
                    justify-content: center;
                    line-height: normal;
                }
        </style>
        <div id="block_translation_{{ word }}" class="col d-flex">
            <a class = "card_{{ word }}" id = "card_translation_{{ word }}">
                <h3 class = "lesson_card" id = "card_translation">{{ translation }}</h3>
            </a>
        </div>
        <script>
                    var visible_{{ word }} = false;
                    const card_word_{{ word }} = document.getElementById('card_block_{{ word }}_{{ id }}');
                    const txt_{{ word }} = document.getElementById('card_{{ word }}');
                    const txt_translation_{{ word }} = document.getElementById('card_translation_{{ word }}');
                    card_word_{{ word }}.addEventListener("click", function(){
                        if (visible_{{ word }}) {
                            visible_{{ word }} = false;
                            txt_{{ word }}.style.display = 'block';
                            txt_translation_{{ word }}.style.display = 'none';
                        } else {
                            visible_{{ word }} = true;
                            txt_{{ word }}.style.display = 'none';
                            txt_translation_{{ word }}.style.display = 'block';
                        }
                    })
        </script>
    </div>
    {% endfor %}
    <script>
        var name = 'card_block_{{ word }}_{{ id }}'
        {% for id, topic, word, translation in words %}
        const card_block_{{ word }}_{{ id }} = document.getElementById('card_block_{{ word }}_{{ id }}');
        if ({{ id }} != sessionStorage.getItem('lesson_id')){
            card_block_{{ word }}_{{ id }}.style.display = 'none';
        }
        {% endfor %}
    </script>
</div>
{% endblock %}